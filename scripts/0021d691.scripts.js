"use strict";var _app=angular.module("main",[]);_app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"TodosCtrl"}).otherwise({redirectTo:"/"})}]);var _app=angular.module("main");_app.controller("TodosCtrl",["$scope","TodosStorage","Todo","underscore",function(a,b,c,d){a.todos=b.get(),a.formTodoNewTitle="",a.formTodoNewDescription="",a.hideComplete=!1,a.availableTodos=0,a.clearForm=function(){a.formTodoNewTitle="",a.formTodoNewDescription=""},a.$watch("todos",function(c,d){c!==d&&b.put(a.todos)},!0),a.addTodo=function(){""!==a.formTodoNewTitle.trim()&&(a.todos.push(new c({title:a.formTodoNewTitle,description:a.formTodoNewDescription})),a.clearForm())},a.editTodo=function(c,e){var f=d.extend(c,e),g=d.filter(a.todos,function(a){return a.$$hashKey===f.$$hashKey&&(a=f.$$hashKey),a});a.todos=g,b.put(a.todos),a.$digest()},a.deleteComplete=function(){var c=d.filter(a.todos,function(a){return a.done!==!0?a:void 0});a.todos=c,b.put(a.todos)},a.getTodosTotal=function(){return a.hideComplete!==!0?a.todos.length:d.filter(a.todos,function(a){return!a.done}).length}}]);var _app=angular.module("main");_app.directive("highlight",[function(){return{restrict:"A",link:function(a,b){b.data("toggle","tooltip"),b.attr("title","Double click to edit todo"),b.addClass("ng-class-highlight"),b.bind("mouseenter mouseleave",function(){b.toggleClass("alert alert-info"),b.tooltip("toggle")})}}}]),_app.directive("deleteComplete",function(){return{restrict:"M",replace:!0,template:'<button type="submit" class="btn btn-danger"><span class="icon-minus"></span>Delete complete</button>',link:function(a,b){b.click(function(){var c=b.closest("#container").find(".modal");c.length>0&&(c.modal("show"),c.find(".cancel").bind("click",function(){c.modal("hide")}),c.find(".delete").bind("click",function(){c.modal("hide"),a.deleteComplete()}))})}}}),_app.directive("modal",function(){return{restrict:"M",replace:!0,templateUrl:"views/modal.html",link:function(){}}}),_app.directive("toogleTodo",[function(){return{restrict:"M",template:'<input toggle-done type="checkbox" />',replace:!0,link:function(a,b){a.todo.done===!0&&b.attr("checked",!0),b.bind("click",function(){b.closest("tr").find(".todo-item").toggleClass("todo-done-true"),a.editTodo(a.todo,{done:b.is(":checked")})})}}}]),_app.directive("todoItem",["$",function(a){return{restrict:"M",templateUrl:"views/todo.html",replace:!0,link:function(b,c){c.find(".todoItemForm").addClass("hide");var d=function(){c.find(".todoItem").toggleClass("hide"),c.find(".todoItemForm").toggleClass("hide")},e=function(){c.closest("tr").bind("dblclick",function(){a(this).unbind("dblclick"),d()})};e(),c.find(".todoItemForm").bind("keydown keypress",function(a){switch(a.keyCode){case 13:return e(),d();case 27:return e(),d();default:return}})}}}]),_app.directive("controls",function(){return{restrict:"M",templateUrl:"views/controls.html",replace:!0,link:function(){}}}),_app.directive("todosList",function(){return{restrict:"M",templateUrl:"views/todos-list.html",replace:!0,link:function(){}}});var _app=angular.module("main"),_=_||window._;_app.filter("titleize",function(){return function(a){return _.string.titleize(a)}}),_app.filter("completedTodos",function(){return function(a,b){return b===!1?a:_.filter(a,function(a){return!a.done})}});var _app=angular.module("main");_app.factory("TodosStorage",function(){var a="angular-todo-app";return{get:function(){return JSON.parse(localStorage.getItem(a)||"[]")},put:function(b){localStorage.setItem(a,JSON.stringify(b))}}}),_app.factory("underscore",function(){return window._}),_app.factory("$",function(){return window.$}),_app.factory("Todo",["underscore",function(a){return function(b){return(void 0===b||null===b)&&(b={}),(void 0!==b.description||null!==b.description)&&0===b.description.trim().length&&delete b.description,a.extend({title:"Hello world",description:"create youre first yeoma app with angular-generator",done:!1},b)}}]);